var AreaRenderer=function(){function n(n,t){this.AREA_BOX_COLOR="#304665",this.AREA_TEXT_COLOR="#3fa9f5",this.AREA_TEXT_MARGIN=13,this.KEYBOARD_MAPPING="m",this._showMap=!0,this._areaLetters=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],this._hudArea=$("#Area"),this.OnMapResize(t),this._myShip=n,this.ApplyKeyboardMappings()}return n.prototype.ApplyKeyboardMappings=function(){var n=this;shortcut.add(this.KEYBOARD_MAPPING,function(){n._showMap=!n._showMap})},n.prototype.DrawSectorMap=function(n,t,i){for(var u=this.GetBoxPositions(n,t,i),r=u.length-1;r>=0;r--)this.DrawAreaBox(u[r])},n.prototype.DrawAreaBox=function(n){CanvasContext.strokeSquare(n.Position.X,n.Position.Y,this._areaSize,this._areaSize,this.AREA_BOX_COLOR),CanvasContext.drawText(n.Sector,n.Position.X+this.AREA_TEXT_MARGIN,n.Position.Y+this.AREA_TEXT_MARGIN,this.AREA_TEXT_COLOR,!1,"start","top"),CanvasContext.drawText(n.Sector,n.Position.X+this.AREA_TEXT_MARGIN,n.Position.Y+this._areaSize-this.AREA_TEXT_MARGIN,this.AREA_TEXT_COLOR,!1,"start","bottom"),CanvasContext.drawText(n.Sector,n.Position.X+this._areaSize-this.AREA_TEXT_MARGIN,n.Position.Y+this.AREA_TEXT_MARGIN,this.AREA_TEXT_COLOR,!1,"end","top"),CanvasContext.drawText(n.Sector,n.Position.X+this._areaSize-this.AREA_TEXT_MARGIN,n.Position.Y+this._areaSize-this.AREA_TEXT_MARGIN,this.AREA_TEXT_COLOR,!1,"end","bottom")},n.prototype.GetBoxPosition=function(n){return new Vector2(Math.ceil(n%3),Math.floor(n/3))},n.prototype.GetBoxPositions=function(n,t,i){var e=[],s=Vector2.SubtractVFromN(n,this._areaSize),h=this,o,u,f,r;for(e.push({Position:n,Sector:h._areaLetters[t--]+i--}),o={MovementController:{Position:s},WIDTH:this._areaSize,HEIGHT:this._areaSize},u=0;u<9;u++)u!==4&&(f=this.GetBoxPosition(u),r=Vector2.MultiplyN(f,this._areaSize),r=Vector2.AddV(r,s),r.X>=0&&r.Y>=0&&r.X+this._areaSize<=this._mapSize&&r.Y+this._areaSize<=this._mapSize&&(o.MovementController.Position=r,CanvasContext.Camera.InView(o)&&e.push({Position:r,Sector:h._areaLetters[t+f.X]+(i+f.Y)})));return e},n.prototype.OnMapResize=function(n){this._mapSize=n,this._areaSize=Math.max(Math.round(this._mapSize/this._areaLetters.length),1e3)},n.prototype.Draw=function(){var n=Math.max(Math.floor(this._myShip.MovementController.Position.X/this._areaSize),0),i=this._areaLetters[n],t=Math.max(Math.ceil(this._myShip.MovementController.Position.Y/this._areaSize),1),r=new Vector2(n*this._areaSize,(t-1)*this._areaSize);this._showMap&&this.DrawSectorMap(r,n,t),this._hudArea.html(i+t)},n.prototype.Update=function(){this.Draw()},n}()